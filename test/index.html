<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stundenplan Card Test</title>
    <style>
        :root {
            --primary-color: #03a9f4;
            --primary-text-color: #212121;
            --secondary-text-color: #757575;
            --divider-color: #e0e0e0;
            --card-background-color: #ffffff;
            --warning-color: #ff9800;
            --error-color: #f44336;
            --text-primary-color: #ffffff;
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            color: var(--primary-text-color);
            text-align: center;
            margin-bottom: 30px;
        }

        .test-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .test-section h2 {
            color: var(--primary-color);
            margin-top: 0;
        }

        .card-container {
            width: 100%;
            max-width: 500px;
            margin: 20px 0;
        }

        .config-display {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
        }

        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }

        .status.success {
            background: #e8f5e8;
            color: #2e7d32;
            border: 1px solid #4caf50;
        }

        .status.error {
            background: #ffeaea;
            color: #c62828;
            border: 1px solid #f44336;
        }

        .controls {
            margin: 20px 0;
        }

        button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }

        button:hover {
            background: #0288d1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üïê Home Assistant Stundenplan Card Test</h1>
        
        <div class="test-section">
            <h2>üìã Test-Konfiguration</h2>
            <div class="config-display" id="config-display">
{
  "type": "custom:ha-stundenplan-card",
  "server": "http://172.17.0.5:8234",
  "username": "david.kech",
  "password": "131628%20131628",
  "height": 400,
  "title": "David's Stundenplan"
}
            </div>
            
            <div class="controls">
                <button onclick="loadCard()">Card laden</button>
                <button onclick="testEditor()">Editor testen</button>
                <button onclick="testMockData()">Mit Mock-Daten testen</button>
            </div>
        </div>

        <div class="test-section">
            <h2>üéØ Card Vorschau</h2>
            <div id="status" class="status">Bereit zum Testen...</div>
            <div class="card-container" id="card-container">
                <!-- Die Card wird hier geladen -->
            </div>
        </div>

        <div class="test-section">
            <h2>‚öôÔ∏è Konfigurations-Editor</h2>
            <div class="card-container" id="editor-container">
                <!-- Der Editor wird hier geladen -->
            </div>
        </div>
    </div>

    <!-- Mock Home Assistant Environment -->
    <script>
        // Mock Home Assistant Umgebung
        window.customElements = window.customElements || {};
        
        // Mock ha-card element
        if (!customElements.get('ha-card')) {
            class HaCard extends HTMLElement {
                connectedCallback() {
                    this.style.display = 'block';
                    this.style.background = 'var(--card-background-color)';
                    this.style.borderRadius = '8px';
                    this.style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';
                    this.style.overflow = 'hidden';
                }
            }
            customElements.define('ha-card', HaCard);
        }

        // Mock ha-textfield element
        if (!customElements.get('ha-textfield')) {
            class HaTextField extends HTMLElement {
                static get observedAttributes() {
                    return ['value', 'label', 'type'];
                }

                connectedCallback() {
                    this.innerHTML = `
                        <input type="${this.getAttribute('type') || 'text'}" 
                               placeholder="${this.getAttribute('label') || ''}"
                               value="${this.getAttribute('value') || ''}"
                               style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    `;
                    
                    const input = this.querySelector('input');
                    input.addEventListener('input', (e) => {
                        this.dispatchEvent(new CustomEvent('input', {
                            detail: { value: e.target.value },
                            bubbles: true
                        }));
                    });
                }

                get value() {
                    return this.querySelector('input')?.value || '';
                }

                set value(val) {
                    const input = this.querySelector('input');
                    if (input) input.value = val;
                }
            }
            customElements.define('ha-textfield', HaTextField);
        }

        // Mock ha-icon element
        if (!customElements.get('ha-icon')) {
            class HaIcon extends HTMLElement {
                connectedCallback() {
                    const icon = this.getAttribute('icon');
                    this.innerHTML = `<span style="font-size: inherit;">üìÖ</span>`;
                }
            }
            customElements.define('ha-icon', HaIcon);
        }

        // Mock ha-circular-progress element
        if (!customElements.get('ha-circular-progress')) {
            class HaCircularProgress extends HTMLElement {
                connectedCallback() {
                    this.innerHTML = `
                        <div style="width: 40px; height: 40px; border: 3px solid #f3f3f3; border-top: 3px solid var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite;"></div>
                        <style>
                            @keyframes spin {
                                0% { transform: rotate(0deg); }
                                100% { transform: rotate(360deg); }
                            }
                        </style>
                    `;
                }
            }
            customElements.define('ha-circular-progress', HaCircularProgress);
        }

        // Mock IServ API mit echten Screenshot-Daten
        async function mockIServAPI(url, options = {}) {
            if (url.includes('172.17.0.5:8234') && url.includes('iserv-timetable/content')) {
                console.log('Using mock IServ API for:', url);
                
                // Echte Screenshot-Daten vom IServ-Service
                const mockData = {
                    "success": true,
                    "timestamp": "2025-09-24T20:26:06.145Z",
                    "screenshots": {
                        "currentWeek": {
                            "data": "iVBORw0KGgoAAAANSUhEUgAABVYAAAScCAYAAABgPdR0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAACAASURBVHic7NgxEYAwAMBAYK8MVCEKyUVDph69fwWZc44x5gFs7X7e1QkAAAAAW7lWBwAAAAAA/I2xCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCvC1awclAMBADASpgPMvt6dhX6UwoyDvJQAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrYiZT6QAAAtdJREFUAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEJ2Zua9HAAAAAAD8xGMVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACBaem8MkqqHNfsAAAAASUVORK5CYII=",
                            "filename": "current-week-timetable.png",
                            "description": "Stundenplan der aktuellen Woche (gecacht)"
                        },
                        "nextWeek": {
                            "data": "iVBORw0KGgoAAAANSUhEUgAABVYAAAScCAYAAABgPdR0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAACAASURBVHic7NgxEYAwAMBAYK8MVCEKyUVDph69fwWZc44x5gFs7X7e1QkAAAAAW7lWBwAAAAAA/I2xCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCgAAAAAQGasAAAAAAJGxCvC1awclAMBADASpgPMvt6dhX6UwoyDvJQAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrYiZT6QAAAtdJREFUAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEAmrAAAAAACRsAoAAAAAEJ2Zua9HAAAAAAD8xGMVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACASVgEAAAAAImEVAAAAACBaem8MkqqHNfsAAAAASUVORK5CYII=",
                            "filename": "next-week-timetable.png", 
                            "description": "Stundenplan der n√§chsten Woche (gecacht)"
                        }
                    },
                    "cached": true
                };
                
                return {
                    ok: true,
                    json: async () => mockData
                };
            }
            return fetch(url, options);
        }
        
        // Override global fetch
        window.fetch = mockIServAPI;

        // Mock HASS object
        const mockHass = {
            hassUrl: () => 'http://localhost:8123',
            callService: (domain, service, data) => {
                console.log(`Mock service call: ${domain}.${service}`, data);
            },
            callApi: async (method, path, params) => {
                console.log(`Mock API call: ${method} ${path}`, params);
                
                // Mock stundenplan data
                if (path.includes('stundenplan')) {
                    return [
                        {
                            time: "08:00 - 09:30",
                            subject: "Mathematik",
                            room: "A101"
                        },
                        {
                            time: "09:45 - 11:15", 
                            subject: "Deutsch",
                            room: "B203"
                        },
                        {
                            time: "11:30 - 13:00",
                            subject: "Geschichte",
                            room: "C305"
                        },
                        {
                            time: "14:00 - 15:30",
                            subject: "Physik",
                            room: "D102"
                        }
                    ];
                }
                return {};
            }
        };

        // Test functions
        function updateStatus(message, isError = false) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${isError ? 'error' : 'success'}`;
        }

        async function loadCard() {
            try {
                updateStatus('Lade Card...');
                
                // Load the card script
                const script = document.createElement('script');
                script.src = './ha-stundenplan-card.js';
                script.type = 'module';
                
                script.onload = () => {
                    setTimeout(() => {
                        createCardInstance();
                    }, 500);
                };
                
                script.onerror = () => {
                    updateStatus('Fehler beim Laden der Card. Stelle sicher, dass sie gebaut wurde (npm run build).', true);
                };
                
                document.head.appendChild(script);
                
            } catch (error) {
                updateStatus(`Fehler: ${error.message}`, true);
            }
        }

        function createCardInstance() {
            try {
                const container = document.getElementById('card-container');
                
                // Create card element
                const card = document.createElement('ha-stundenplan-card');
                
                // Set mock hass
                card.hass = mockHass;
                
                // Set config
                const config = {
                    type: 'custom:ha-stundenplan-card',
                    server: 'http://172.17.0.5:8234',
                    username: 'david.kech',
                    password: '131628%20131628',
                    height: 400,
                    title: "David's Stundenplan"
                };
                
                card.setConfig(config);
                
                // Clear container and add card
                container.innerHTML = '';
                container.appendChild(card);
                
                updateStatus('Card erfolgreich geladen und konfiguriert!');
                
            } catch (error) {
                updateStatus(`Fehler beim Erstellen der Card: ${error.message}`, true);
            }
        }

        function testEditor() {
            try {
                updateStatus('Lade Editor...');
                
                const container = document.getElementById('editor-container');
                
                // Create editor element
                const editor = document.createElement('ha-stundenplan-card-editor');
                
                // Set mock hass
                editor.hass = mockHass;
                
                // Set config
                const config = {
                    type: 'custom:ha-stundenplan-card',
                    server: 'http://172.17.0.5:8234',
                    username: 'david.kech',
                    password: '131628%20131628',
                    height: 400,
                    title: "David's Stundenplan"
                };
                
                editor.setConfig(config);
                
                // Listen for config changes
                editor.addEventListener('config-changed', (event) => {
                    console.log('Neue Konfiguration:', event.detail.config);
                    document.getElementById('config-display').textContent = 
                        JSON.stringify(event.detail.config, null, 2);
                });
                
                // Clear container and add editor
                container.innerHTML = '';
                container.appendChild(editor);
                
                updateStatus('Editor erfolgreich geladen!');
                
            } catch (error) {
                updateStatus(`Fehler beim Laden des Editors: ${error.message}`, true);
            }
        }

        function testMockData() {
            // Override fetch to return mock data
            const originalFetch = window.fetch;
            window.fetch = async (url, options) => {
                if (url.includes('stundenplan')) {
                    return {
                        ok: true,
                        json: async () => [
                            { time: "08:00 - 09:30", subject: "Mathematik", room: "A101" },
                            { time: "09:45 - 11:15", subject: "Deutsch", room: "B203" },
                            { time: "11:30 - 13:00", subject: "Geschichte", room: "C305" }
                        ]
                    };
                }
                return originalFetch(url, options);
            };
            
            updateStatus('Mock-Daten aktiviert. Lade die Card neu.');
            createCardInstance();
        }

        // Initialize
        updateStatus('Bereit zum Testen. Klicke "Card laden" um zu beginnen.');
    </script>
</body>
</html>